<!DOCTYPE html>
<html ng-app="demo">
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="bower_components/angularjs-slider/dist/rzslider.css">
</head>
<body ng-controller="MainCtrl">
    <div class="lampadario">
        <label class="light-buble" for="switch"><bulb><lit/></bulb></label>
        <div class="filo"></div>
    </div>

    <div style="position:absolute; top: 100px; left:20px; height: 100px;">
        <rzslider
          rz-slider-model="slider.value"
          rz-slider-options="slider.options"
        ></rzslider>
    </div>
</body>
<script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
<script type="text/javascript" src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
<script type="text/javascript" src="bower_components/angularjs-slider/dist/rzslider.js"></script>

<script type="text/javascript">
    var app = angular.module('demo', ['rzModule', 'ui.bootstrap']);
    app.controller('MainCtrl', function($scope, $rootScope) {
        //Range slider config
        $scope.slider = {
            value:0,
            options: {
              floor: 0,
              ceil: 100,
              step: 1,
              vertical: true
            }
        };

        $scope.$watch('switchOn', function(newVal){
            if(!newVal){
                $('bulb').attr('style','');
                $("label").attr('style','');
                $('lit').attr('style','');
            }
        });

        $scope.$watch("slider.value", function(newVal){
                var percentage = newVal/100;
                //$("label").css("background", "rgba(255,255,255," + 1 * percentage  + ")");
                var background = "rgba(255,255,255," + 1 * percentage  + ")";
                var boxShadow = 'inset 0px 1px 5px rgba(255,255,255,0.1),'
                    + 'inset 0px 2px 20px rgba(255,255,255,0.07),'
                    + '0px 0px 10px rgba(255,255,255,' + 0.8 * percentage + '),'
                    + '0px 0px 30px rgba(255,255,255,' + 0.8 * percentage + '),'
                    + '0px 0px 50px rgba(255,255,255,' + 0.8 * percentage + '),'
                    + '0px 0px 70px rgba(255,255,255,' + 0.6 * percentage + '),'
                    + '-80px -15px 120px 0px rgba(255,255,255,' + 1 * percentage + '),'
                    + '-80px -15px 40px -10px rgba(' + parseInt(255 * percentage) + ',' + parseInt(255 * percentage) + ',' + parseInt(255 * percentage) + ',0.1)';

                var bulbBoxShadow = '0px 10px 30px rgba(255,255,255,' + 0.9 * Math.sqrt(percentage) + ');';
                var bulbBackground = 'rgba(255,255,255,' + 1 * Math.pow(percentage, 1/2) + ')';
                var litBackground = 'rgba(' + (75 + parseInt(180 * Math.pow(percentage, 1/4))) + ',' + (75 + parseInt(180 * Math.pow(percentage, 1/4))) + ',' + (75 + parseInt(180 * Math.pow(percentage, 1/4))) + ',1)';

                $('bulb').attr('style','background:' + background + '; box-shadow:' + bulbBoxShadow + ';');
                $("label").attr('style','background:' + background + '; box-shadow:' + boxShadow + ';');
                $('lit').css('background', litBackground);
        })
    });
</script>
</html>
